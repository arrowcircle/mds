.navbar.bg-base-100
  .navbar-start
    = link_to root_url, class: "btn btn-ghost normal-case text-xl" do
      МДС Музыка
    %ul.menu.menu-horizontal.p-0
      - active = %w(authors stories).include?(controller_name)
      - attrs = { class: ["#{'active' if active}"] }
      %li{**attrs}
        = link_to [:authors], attrs do
          = 'Книги'

      - active = controller_name == "users"
      - attrs = { class: ["#{'active' if active}"] }
      %li{**attrs}
        = link_to [:users], attrs do
          = 'Участники'
    .form-control
      = form_with url: search_url do |f|
        = text_field_tag :q, params[:q], placeholder: "Search", class: "input input-bordered"
  .navbar-end
    %ul.menu.menu-horizontal.p-0.bg-base-100
      - if user_signed_in?
        %li
          = link_to edit_user_registration_path, class: 'nav-link' do
            - if current_user.avatar.present?
              .mask.mask-squircle.w-auto= image_tag current_user.avatar.imgproxy_url(width: 100, height: 100, resizing_type: :fill), width: 30, class: ['rounded-circle', 'z-depth-0']              
            = current_user.username
        %li= link_to 'Выход', destroy_user_session_path, data: { turbo_method: :delete }
      - else
        %li= link_to 'Регистрация', new_user_registration_path
        %li= link_to 'Вход', new_user_session_path
